#include "malware_http_spammer.h"


HttpRequestSender::HttpRequestSender(QObject* parent) : QObject(parent) {
    manager = new QNetworkAccessManager(this);
    connect(manager, &QNetworkAccessManager::finished, this, &HttpRequestSender::handleResponse);
    QTimer::singleShot(1000, this, &HttpRequestSender::sendRequest);
}


void HttpRequestSender::sendRequest() {
    QUrl url("http://google.com");
    QNetworkRequest request(url);
    request.setTransferTimeout(5000); // таймаут в 5 секунд

    // генерация случайной информационной части
    const QString possibleCharacters = "0123456789abcdef";
    QString randomInfo;
    for (int i = 0; i < 32; ++i) {
        randomInfo += possibleCharacters[QRandomGenerator::global()->generate() % possibleCharacters.length()];
    }

    // отправка запроса
    manager->get(request);

    // отправка следующего запроса через 1 секунду
    QTimer::singleShot(1000, this, &HttpRequestSender::sendRequest);
}


void HttpRequestSender::handleResponse(QNetworkReply* reply) {
    Q_UNUSED(reply);
    return;
}
